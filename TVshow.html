<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TV Shows - Stream Verse</title>
  <style>
    * { box-sizing: border-box; margin:0; padding:0; }
    body { font-family: 'Helvetica Neue', Arial, sans-serif; background: #141414; color: white; }
    a { text-decoration: none; color: inherit; }

    /* Navbar */
    .navbar {
      position: fixed; top: 0; width: 100%; height: 60px; background: rgba(0,0,0,0.95);
      display: flex; align-items: center; justify-content: space-between; padding: 0 50px; z-index: 100;
    }
    .navbar .logo { font-weight: 700; font-size: 24px; letter-spacing: 1px; color: #e50914; cursor: pointer; }
    .navbar .nav-links { display: flex; align-items: center; gap: 20px; }
    .navbar .nav-links a { font-size: 14px; color: #e5e5e5; font-weight: 500; transition: color 0.2s; }
    .navbar .nav-links a:hover { color: #fff; }
    .navbar .nav-links a.active { color: #fff; font-weight: 700; }
    .navbar .user-profile { width: 32px; height: 32px; border-radius: 4px; background: linear-gradient(135deg, #e50914, #831010); cursor: pointer; }

    /* Search Bar */
    .search-bar {
      position: fixed; top: 70px; width: 100%; padding: 10px 50px;
      display: flex; justify-content: center; background: rgba(0,0,0,0.9); z-index: 99;
    }
    .search-bar input {
      width: 60%; padding: 10px 15px; border-radius: 4px; border: none; font-size: 14px;
    }
    .search-bar button {
      margin-left: 10px; padding: 10px 20px; border: none; border-radius: 4px;
      background: #e50914; color: white; font-weight: bold; cursor: pointer;
    }
    .search-bar button:hover { background: #b0060f; }

    /* Hero Section */
    .hero {
      position: relative; height: 75vh;
      background: linear-gradient(to bottom, transparent 0%, #141414 100%), linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      display: flex; flex-direction: column; justify-content: flex-end; padding: 0 50px 60px; margin-top: 120px;
    }
    .hero-content { position: relative; z-index: 2; max-width: 600px; }
    .hero h1 { font-size: 52px; margin-bottom: 15px; text-shadow: 2px 2px 8px rgba(0,0,0,0.8); }
    .hero p { font-size: 18px; color: #e5e5e5; margin-bottom: 25px; text-shadow: 1px 1px 4px rgba(0,0,0,0.8); }
    .hero-buttons { display: flex; gap: 15px; }
    .hero button {
      padding: 12px 28px; font-size: 16px; font-weight: 700; border: none; border-radius: 4px;
      cursor: pointer; transition: all 0.3s;
    }
    .btn-play { background-color: white; color: #000; }
    .btn-play:hover { background-color: rgba(255,255,255,0.8); }
    .btn-info { background-color: rgba(109,109,110,0.7); color: white; }
    .btn-info:hover { background-color: rgba(109,109,110,0.4); }

    /* Rows */
    .row { margin: 30px 50px; }
    .row h2 { margin-bottom: 15px; font-size: 22px; font-weight: 700; }
    .row-cards { display: flex; overflow-x: auto; gap: 12px; padding-bottom: 15px; }
    .row-cards::-webkit-scrollbar { height: 6px; }
    .row-cards::-webkit-scrollbar-track { background: #333; }
    .row-cards::-webkit-scrollbar-thumb { background: #888; border-radius: 3px; }
    .card {
      min-width: 180px; height: 270px; border-radius: 6px; flex-shrink: 0; cursor: pointer;
      transition: transform 0.3s; background-size: cover; background-position: center;
      position: relative;
    }
    .card:hover { transform: scale(1.08); box-shadow: 0 8px 24px rgba(0,0,0,0.6); }
    .card-title {
      position: absolute; bottom: 0; left: 0; right: 0; padding: 8px;
      background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
      font-size: 14px; text-align: center; color: #fff;
    }

    /* Modal Popup */
    .modal {
      display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.85); justify-content: center; align-items: center; z-index: 1000;
    }
    .modal-content {
      background: #1c1c1c; border-radius: 8px; width: 90%; max-width: 700px;
      display: flex; flex-direction: row; overflow: hidden;
      box-shadow: 0 0 20px rgba(0,0,0,0.8);
    }
    .modal img { width: 45%; object-fit: cover; }
    .modal-details {
      padding: 20px; flex: 1; display: flex; flex-direction: column; justify-content: space-between;
    }
    .modal-details h2 { margin-bottom: 10px; }
    .modal-details p { color: #ccc; font-size: 14px; margin-bottom: 10px; }
    .modal-details .genres { font-style: italic; color: #aaa; }
    .modal-details .rating { color: #f5c518; font-weight: bold; }
    .modal-details button {
      background: #e50914; color: white; border: none; padding: 10px 20px;
      font-size: 14px; border-radius: 4px; cursor: pointer; align-self: flex-start;
    }
    .modal-details button:hover { background: #b0060f; }
    .close-btn {
      position: absolute; top: 20px; right: 30px; font-size: 28px; color: white;
      cursor: pointer; font-weight: bold;
    }

    /* Responsive */
    @media(max-width: 768px){
      .hero h1 { font-size: 36px; }
      .navbar, .row { padding: 0 20px; margin: 20px 20px; }
      .navbar .nav-links { gap: 10px; }
      .navbar .nav-links a { font-size: 12px; }
      .modal-content { flex-direction: column; }
      .modal img { width: 100%; height: 300px; }
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <div class="navbar">
    <div class="logo" onclick="window.location.href='home.html'">STREAM VERSE</div>
    <div class="nav-links">
      <a href="home.html">Home</a>
      <a href="TVshow.html" class="active">TV Shows</a>
      <a href="movie.html">Movies</a>
      <a href="mylist.html">My List</a>
      <a href="watchparty.html">Watch Party</a>
      <div class="user-profile" onclick="window.location.href='login.html'"></div>
    </div>
  </div>

  <!-- Search Bar -->
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search for a TV show...">
    <button id="searchBtn">Search</button>
  </div>

  <!-- Hero -->
  <div class="hero">
    <div class="hero-content">
      <h1>Drama Series</h1>
      <p>Binge-watch the best TV shows. New episodes streaming weekly.</p>
      <div class="hero-buttons">
        <button class="btn-play" onclick="alert('Playing show...')">▶ Play</button>
        <button class="btn-info" onclick="alert('More info coming soon!')">ℹ More Info</button>
      </div>
    </div>
  </div>

  <!-- Rows -->
  <div class="row trending">
    <h2>Trending TV Shows</h2>
    <div class="row-cards" id="trending"></div>
  </div>

  <div class="row popular">
    <h2>Popular on Platform</h2>
    <div class="row-cards" id="popular"></div>
  </div>

  <div class="row new">
    <h2>New Episodes</h2>
    <div class="row-cards" id="new"></div>
  </div>

  <!-- Search Results -->
  <div class="row" id="searchResultsSection" style="display:none;">
    <h2>Search Results</h2>
    <div class="row-cards" id="searchResults"></div>
  </div>

  <!-- Modal -->
  <div class="modal" id="showModal">
    <div class="modal-content">
      <span class="close-btn" id="closeModal">&times;</span>
      <img id="modalImage" src="" alt="Show Poster">
      <div class="modal-details">
        <div>
          <h2 id="modalTitle"></h2>
          <p class="genres" id="modalGenres"></p>
          <p class="rating" id="modalRating"></p>
          <p id="modalSummary"></p>
        </div>
        <button id="watchBtn">▶ Watch Now</button>
      </div>
    </div>
  </div>

  <script>
    const shows = {
      trending: ["Breaking Bad", "Game of Thrones", "Stranger Things", "The Witcher", "The Boys"],
      popular: ["Friends", "The Office", "How I Met Your Mother", "Sherlock", "The Crown"],
      new: ["House of the Dragon", "Loki", "The Last of Us", "One Piece", "Ahsoka"]
    };

    async function fetchShow(name) {
      try {
        const res = await fetch(`https://api.tvmaze.com/singlesearch/shows?q=${encodeURIComponent(name)}`);
        const data = await res.json();
        return data;
      } catch (err) {
        console.error("Error fetching show:", err);
        return null;
      }
    }

    async function loadShows(categoryId, showList) {
      const container = document.getElementById(categoryId);
      for (const name of showList) {
        const show = await fetchShow(name);
        createCard(show, container);
      }
    }

    function createCard(show, container) {
      const card = document.createElement("div");
      card.className = "card";
      card.style.backgroundImage = show?.image?.medium ? `url(${show.image.medium})` : "linear-gradient(135deg, #333, #111)";

      const title = document.createElement("div");
      title.className = "card-title";
      title.textContent = show.name;
      card.appendChild(title);

      card.onclick = () => openModal(show);
      container.appendChild(card);
    }

    function openModal(show) {
      document.getElementById("modalTitle").textContent = show.name || "Unknown";
      document.getElementById("modalGenres").textContent = show.genres?.join(", ") || "N/A";
      document.getElementById("modalRating").textContent = show.rating?.average ? `⭐ ${show.rating.average}/10` : "⭐ No rating yet";
      document.getElementById("modalSummary").innerHTML = show.summary || "No summary available.";
      document.getElementById("modalImage").src = show.image?.original || show.image?.medium || "";
      document.getElementById("watchBtn").onclick = () => window.open(show.url, "_blank");

      document.getElementById("showModal").style.display = "flex";
    }

    function closeModal() {
      document.getElementById("showModal").style.display = "none";
    }

    document.getElementById("closeModal").onclick = closeModal;
    window.onclick = e => { if (e.target === document.getElementById("showModal")) closeModal(); };

    // Search functionality
    document.getElementById("searchBtn").onclick = async () => {
      const query = document.getElementById("searchInput").value.trim();
      const section = document.getElementById("searchResultsSection");
      const resultsContainer = document.getElementById("searchResults");
      resultsContainer.innerHTML = "";

      if (!query) return alert("Please enter a TV show name!");

      try {
        const res = await fetch(`https://api.tvmaze.com/search/shows?q=${encodeURIComponent(query)}`);
        const data = await res.json();

        if (data.length === 0) {
          resultsContainer.innerHTML = "<p>No results found.</p>";
        } else {
          section.style.display = "block";
          data.forEach(item => createCard(item.show, resultsContainer));
          section.scrollIntoView({ behavior: "smooth" });
        }
      } catch (error) {
        console.error("Search error:", error);
      }
    };

    async function init() {
      await loadShows("trending", shows.trending);
      await loadShows("popular", shows.popular);
      await loadShows("new", shows.new);
    }

    window.onload = init;
  </script>
</body>
</html>
